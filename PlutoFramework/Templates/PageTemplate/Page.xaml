<?xml version="1.0" encoding="utf-8" ?>
<ResourceDictionary xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                    xmlns:navigationbar="clr-namespace:PlutoFramework.Components.NavigationBar"
                    xmlns:txanalyzer="clr-namespace:PlutoFramework.Components.TransactionAnalyzer"
                    xmlns:password="clr-namespace:PlutoFramework.Components.Password"
                    xmlns:account="clr-namespace:PlutoFramework.Components.Account"
                    xmlns:loading="clr-namespace:PlutoFramework.Components.Loading"
                    xmlns:kilt="clr-namespace:PlutoFramework.Components.Kilt"
                    xmlns:xcavate="clr-namespace:PlutoFramework.Components.Xcavate"
                    xmlns:topnavigationbartemplate="clr-namespace:PlutoFramework.Templates.TopNavigationBarTemplate"
                    x:Class="PlutoFramework.Templates.PageTemplate.Page">

    <ControlTemplate x:Key="PageTemplate">
        <!-- BackgroundColor="{AppThemeBinding Light=White, Dark=#0a0a0a}" -->
        <AbsoluteLayout AbsoluteLayout.LayoutBounds="0.5, 0.5, 1, 1"
                        AbsoluteLayout.LayoutFlags="All"
                        x:Name="PopupsLayout">

            <Image AbsoluteLayout.LayoutBounds="0.5, 0.5, 1, 1"
                   AbsoluteLayout.LayoutFlags="All"
                   Opacity="{AppThemeBinding Light=0.96}"
                   Aspect="AspectFill"/>

            <ScrollView AbsoluteLayout.LayoutBounds="0.5, 0.5, 1, 1"
                        AbsoluteLayout.LayoutFlags="All"
                        Padding="{TemplateBinding ScrollPadding}"
                        Orientation="{TemplateBinding ScrollViewOrientation}"
                        x:Name="scrollView">
                <!-- Content block -->
                <ContentPresenter Content="{TemplateBinding MainContent}"/>
            </ScrollView>

            <topnavigationbartemplate:TopNavigationBarTemplate Title="{TemplateBinding Title}"
                                                               Extra1Text="{TemplateBinding NavigationBarExtra1Text}"
                                                               Extra1Command="{TemplateBinding NavigationBarExtra1Command}"
                                                               Extra1Image="{TemplateBinding NavigationBarExtra1Image}"
                                                               Extra2Text="{TemplateBinding NavigationBarExtra2Text}"
                                                               Extra2Command="{TemplateBinding NavigationBarExtra2Command}"
                                                               Extra2Image="{TemplateBinding NavigationBarExtra2Image}"
                                                               IsVisible="{TemplateBinding IsNavbarVisible}"
                                                               HasShadow="{TemplateBinding NavigationBarHasShadow}"
                                                               x:Name="TopNavigationBar" />

            <txanalyzer:TransactionAnalyzerConfirmationView ZIndex="{TemplateBinding TransactionAnalyzerZIndex}" />

            <account:NoAccountPopup ZIndex="10" />

            <kilt:NoDidPopupView ZIndex="10" />

            <xcavate:NotWhitelistedPopupView ZIndex="10" />

            <password:EnterPasswordPopupView ZIndex="10"/>

            <loading:FullPageLoadingView ZIndex="20" />
        </AbsoluteLayout>
    </ControlTemplate>
</ResourceDictionary>